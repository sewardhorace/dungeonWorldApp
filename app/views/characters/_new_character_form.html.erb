<style>
.little-box {
  height: 30px;
  width: 30px;
  border: 1px solid gray;
  border-radius: 4px;
  text-align: center;
  padding-top: 5px;
  margin: 2px;
  background-color: #ffffff;
}
.drop-hover {
  background-color: #abd9fa
}
</style>

<%= form_for @character, url: game_characters_path do |f| %>
<div class="form-group">
  <%= f.label "Character Name:" %>
  <%= f.text_field :name, class: "form-control" %>
</div>
<div class="form-group">
  <%= f.label "Description:" %>
  <%= f.text_area :description, class: "form-control", rows: 3 %>
</div>
<div>
  <div class="col-xs-12">
    <div class="pull-left">
      <div>STR</div>
      <div class="little-box abilities" data-ability="str"></div>
    </div>
    <div class="pull-left">
      <div>DEX</div>
      <div class="little-box abilities" data-ability="dex"></div>
    </div>
    <div class="pull-left">
      <div>CON</div>
      <div class="little-box abilities" data-ability="con"></div>
    </div>
    <div class="pull-left">
      <div>INT</div>
      <div class="little-box abilities" data-ability="int"></div>
    </div>
    <div class="pull-left">
      <div>WIS</div>
      <div class="little-box abilities" data-ability="wis"></div>
    </div>
    <div class="pull-left">
      <div>CHA</div>
      <div class="little-box abilities" data-ability="cha"></div>
    </div>
  </div>
  <div class="col-xs-12">
    <div class="little-box ability-options pull-left">16</div>
    <div class="little-box ability-options pull-left">15</div>
    <div class="little-box ability-options pull-left">13</div>
    <div class="little-box ability-options pull-left">12</div>
    <div class="little-box ability-options pull-left">9</div>
    <div class="little-box ability-options pull-left">8</div>
  </div>
</div>
<%= f.submit "Create", class: "btn btn-default" %>
<% end %>

<script>
var abilities = {
};

$( ".ability-options" ).draggable({
  revert: "invalid",
  snap: ".abilities",
  snapMode: "inner",
});

$( ".abilities" ).droppable({
  accept: ".ability-options",
  drop: function(ev, ui) {
    var $self = $(this);
    var value = $(ui.draggable).text();
    abilities[$self.attr('data-ability')] = value;
    console.log(abilities);
    $self.droppable( "disable" );
  },
  out: function(ev, ui) {
    console.log("rooof");
    $(this).droppable("enable");
  },
});

$("form").submit(function( event ) {
  $("input:last").after('<input type="hidden" name="character[str]" value='+abilities.str+'>');
  $("input:last").after('<input type="hidden" name="character[dex]" value='+abilities.dex+'>');
  $("input:last").after('<input type="hidden" name="character[con]" value='+abilities.con+'>');
  $("input:last").after('<input type="hidden" name="character[int]" value='+abilities.int+'>');
  $("input:last").after('<input type="hidden" name="character[wis]" value='+abilities.wis+'>');
  $("input:last").after('<input type="hidden" name="character[cha]" value='+abilities.cha+'>');

});


</script>
